name: m3e
packages:
  - "packages/*"
  - "apps/*"

command:
  bootstrap:
    usePubspecOverrides: true

scripts:
  bootstrap: melos bootstrap
  clean: melos exec -- flutter clean
  get: melos exec -- flutter pub get
  format: melos exec -- dart format --set-exit-if-changed .
  analyze: melos exec -- dart analyze --fatal-infos --fatal-warnings
  test: melos exec -- flutter test --coverage
  create:
    run: dart run tool/create_component.dart
    description: Scaffold a new [component]_m3e package (melos run create -- name=badge)
  pub-dry-run:
    run: melos exec -c 1 --no-private -- "flutter pub publish --dry-run"
    description: Run 'flutter pub publish --dry-run' in all publishable packages
    packageFilters:
      noPrivate: true
      dirExists:
        - lib
  pub-publish:
    run: melos exec -c 1 --no-private -- "flutter pub publish"
    description: Run 'flutter pub publish' in all publishable packages
    packageFilters:
      noPrivate: true
      dirExists:
        - lib
